<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>Baykar UAV Rant</title>

    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=PT+Sans:400" rel="stylesheet">

    <!-- Bootstrap -->
    <link type="text/css" rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Option 1: Include in HTML -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet"/>
    <!-- Custom stlylesheet -->
    <link type="text/css" rel="stylesheet" href="{% static 'css/style.css' %}"/>
    <link type="text/css" rel="stylesheet" href="{% static 'css/main.css' %}"/>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-1 bg-light sticky-top">
            <div class="d-flex flex-sm-column flex-row flex-nowrap bg-light align-items-center sticky-top">

                <ul class="nav nav-pills nav-flush flex-sm-column flex-row flex-nowrap mb-auto mx-auto text-center justify-content-between w-100 px-3 align-items-center">
                    <li class="nav-item">
                        <a href="#" class="nav-link py-3 px-2" title="" data-bs-toggle="tooltip"
                           data-bs-placement="right" data-bs-original-title="Home">
                            <i class="bi-house fs-1"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link py-3 px-2" title="" data-bs-toggle="tooltip"
                           data-bs-placement="right" data-bs-original-title="Dashboard">
                            <i class="bi bi-save2 fs-1"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link py-3 px-2" title="" data-bs-toggle="tooltip"
                           data-bs-placement="right" data-bs-original-title="Orders">
                            <i class="bi bi-card-list fs-1"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link py-3 px-2" title="" data-bs-toggle="tooltip"
                           data-bs-placement="right" data-bs-original-title="Products">
                            <i class="bi-heart fs-1"></i>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'logout' %}" class="nav-link py-3 px-2" title="" data-bs-toggle="tooltip"
                           data-bs-placement="right" data-bs-original-title="Customers">
                            <i class="bi bi-box-arrow-left fs-1"></i>
                        </a>
                    </li>
                </ul>

            </div>
        </div>
        <div class="col-sm-11 min-vh-100">
            <!-- content -->
            <div id="booking" class="section">
                <div class="row">


                    <div class="booking-form">

                        <div class="s003">
                            <form>
                                {% csrf_token %}
                                <div class="inner-form">
                                    <div class="input-field first-wrap">
                                        <div class="input-select">
                                            <select id="brand" data-trigger="" name="choices-single-defaul">

                                            </select>
                                        </div>
                                    </div>
                                    <div class="input-field first-wrap">
                                        <div class="input-select">
                                            <select id="model" data-trigger="" name="choices-single-defaul">

                                            </select>
                                        </div>
                                    </div>
                                    <div class="input-field first-wrap">
                                        <div class="input-select">
                                            <select id="weight" data-trigger="" name="choices-single-defaul">

                                            </select>
                                        </div>
                                    </div>
                                    <div class="input-field first-wrap">
                                        <div class="input-select">
                                            <select id="category" data-trigger="" name="choices-single-defaul">

                                            </select>
                                        </div>
                                    </div>
                                    <div class="input-field first-wrap">
                                        <div class="input-select">
                                            <select id="airtime" data-trigger="" name="choices-single-defaul">

                                            </select>
                                        </div>
                                    </div>
                                    <div class="input-field first-wrap">
                                        <div class="input-select">
                                            <select id="price" data-trigger="" name="choices-single-defaul">

                                            </select>
                                        </div>
                                    </div>
                                    <div class="input-field second-wrap">
                                        <input id="search" type="text" placeholder="ARA"/>
                                    </div>
                                    <div class="input-field third-wrap">
                                        <button class="btn-search" type="button">
                                            <svg class="svg-inline--fa fa-search fa-w-16" aria-hidden="true"
                                                 data-prefix="fas" data-icon="search" role="img"
                                                 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                <path fill="currentColor"
                                                      d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>


                    <div class="container overflow-auto">
                        <div id="uav-card" class="row">


                        </div>
                    </div>
                    <div class="modal fade" id="updateModal" tabindex="-1" role="dialog"
                         aria-labelledby="updateModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <form id="updateForm">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="updateModalLabel">Update My Model</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <input type="hidden" id="id" name="id">
                                        <div class="form-group">
                                            <label for="name">Name:</label>
                                            <input type="text" class="form-control" id="name" name="name">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close
                                        </button>
                                        <button type="submit" class="btn btn-primary">Save changes</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

</body><!-- This templates was made by Colorlib (https://colorlib.com) -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/extention/choices.js' %}"></script>
<script>
      const choices = new Choices('[data-trigger]',
      {
        searchEnabled: false,
        itemSelectText: '',
      });





</script>
</html>
<script>
  $(document).ready(function() {
    $.ajax({
      url: '/api/uav/',  // API endpoint
      method: 'GET',
      success: function(data) {
      var div = $('#uav-card');
      var select_brand = $('#brand');
      var select_model = $('#model');
      var select_weight = $('#weight');
      var select_cat = $('#category');
      var select_air = $('#airtime');
      var select_price = $('#price');
      console.log(select_brand);
      select_brand.empty();
        $.each(data, function(index, uav) {
        console.log(uav.id)
        var uavCard = $('<div class="col-md-4 my-3">\
                          <div class="booking-form">\
                            <div class="uav-card">\
                            <img src="' + uav.img + '" height="150px" width="150px">\
                              <hr>\
                              <h1>' + uav.brand + '</h1>\
                              <hr>\
                              <h3>' + uav.model + '</h3>\
                              <hr>\
                              <h3>' + uav.weight + '</h3>\
                              <hr>\
                              <h3>' + uav.category + '</h3>\
                              <hr>\
                              <h3>' + uav.airtime + '</h3>\
                              <hr>\
                              <h3>' + uav.price + '</h3>\
                            </div>\
                            <button type="button" onclick="deleteMyModel('+uav.id+')" class="btn btn-danger"><i class="bi bi-trash"></i> Sil </button>\
                            <a href="/putuav/'+uav.id+'" ><button type="button" class="btn btn-primary"><i class="bi bi-pen"></i> Düzenle </button></a>\
                          </div>\
                        </div>');
      div.append(uavCard);
        select_brand.append($('<option>', {
          value: uav['brand'],
          text: uav['brand']
        }));
    });
  },
  error: function(error) {
    console.log(error);
  }
    });
  });

function deleteMyModel(id) {
    $.ajax({
        url: '/api/uav/' + id + '/', // URL şablonuna parametre ekleyin
        type: 'DELETE',
headers: {
        'X-CSRFToken': document.querySelector('input[name="csrfmiddlewaretoken"]').value
    },
        success: function() {
            alert('Öğe başarıyla silindi!');
        },
        error: function() {
            alert('Bir hata oluştu. Öğe silinemedi.');
        }
    });
}







</script>
